<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Feedback Khách Hàng - LPERFUME</title>

    <!-- Swiper CSS -->
    <style>
        .section-5 {
            font-family: "Segoe UI", sans-serif;
            background-color: #fdfdfd;
            padding: 60px 20px;
        }

        .section-5__heading {
            font-size: 28px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 40px;
        }

        .section-5__swiper {
            max-width: 1000px;
            margin: auto;
        }

        .section-5__card {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 40px;
            background: #fff;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.05);
            flex-wrap: wrap;
        }

        .section-5__feedback-img {
            max-width: 320px;
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .section-5__brand-box {
            max-width: 360px;
            text-align: left;
        }

        .section-5__logo {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .section-5__brand {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .section-5__title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 16px;
            color: #444;
        }

        .section-5__features {
            list-style: none;
            padding-left: 0;
            margin-bottom: 20px;
        }

        .section-5__features li {
            margin-bottom: 10px;
            font-size: 16px;
        }

        .section-5__features li::before {
            content: "✔️";
            margin-right: 10px;
        }

        .section-5__quote {
            font-style: italic;
            color: #888;
            margin-top: 10px;
        }

        .section-5__footer-link {
            margin-top: 12px;
            font-size: 13px;
            color: #666;
        }

        .section-5__swiper .swiper-button-prev,
        .section-5__swiper .swiper-button-next {
            color: #333;
        }

        .section-5__text-center {
            text-align: center;
        }

        @media (max-width: 768px) {
            .section-5__card {
                flex-direction: column;
            }
        }

        /* Swiper core styles cơ bản */
        .swiper {
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .swiper-wrapper {
            display: flex;
            transition-property: transform;
            box-sizing: content-box;
        }

        .swiper-slide {
            flex-shrink: 0;
            width: 100%;
            height: auto;
            position: relative;
        }

        .swiper-button-prev,
        .swiper-button-next {
            position: absolute;
            top: 50%;
            z-index: 10;
            width: 44px;
            height: 44px;
            margin-top: -22px;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.2);
            color: white;
            text-align: center;
            line-height: 44px;
            font-size: 24px;
            border-radius: 50%;
            user-select: none;
        }

        .swiper-button-prev {
            left: 10px;
        }

        .swiper-button-next {
            right: 10px;
        }
    </style>
</head>

<body>

    <!-- Swiper Section -->
    <section class="section-5">
        <div class="section-5__swiper">
            <h2 class="section-5__heading">PHẢN HỒI TỪ KHÁCH HÀNG</h2>
            <div class="swiper feedback-swiper">
                <div class="swiper-wrapper" id="feedbackContainer">
                    <div class="swiper-slide section-5__text-center">Đang tải feedback...</div>
                </div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
            </div>
        </div>
    </section>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Feedback Script -->
    <script>
        function convertDriveLinkToImage(link) {
            if (!link) return "https://via.placeholder.com/300x200?text=No+Image";
            const fileMatch = link.match(/\/file\/d\/([^/]+)\//);
            const id = fileMatch?.[1];
            return id ? `https://drive.google.com/thumbnail?id=${id}&sz=w400` : "https://via.placeholder.com/300x200?text=No+Image";
        }

        function loadFeedbackSection() {
            fetch("https://opensheet.elk.sh/1h9qiy1UYF6niv1MNrj4v7frYfa7yanFcJjOEtS-8OTQ/Feedback")
                .then(res => res.json())
                .then(data => {
                    const container = document.getElementById("feedbackContainer");
                    container.innerHTML = "";

                    if (!data || data.length === 0) {
                        container.innerHTML = `<div class="swiper-slide"><p class="section-5__text-center">Không có feedback nào.</p></div>`;
                        return;
                    }

                    data.forEach(item => {
                        const imgSrc = convertDriveLinkToImage(item["Link feedback"]);
                        container.innerHTML += `
              <div class="swiper-slide">
                <div class="section-5__card">
                  <img src="${imgSrc}" class="section-5__feedback-img" alt="Feedback image" loading="lazy">
                  <div class="section-5__brand-box">
                    <div class="section-5__logo">⦻</div>
                    <div class="section-5__brand">LPERFUME</div>
                    <div class="section-5__title">Feedback Khách hàng</div>
                    <ul class="section-5__features">
                      <li>Lưu hương 6-12 tiếng trên da</li>
                      <li>Dung tích 25ml nhỏ gọn, tiện lợi</li>
                      <li>Mùi hương sang trọng, chuẩn Authentic</li>
                    </ul>
                    <div class="section-5__quote">"Perfume is the most intense form of memory..."</div>
                    <div class="section-5__footer-link">www.lperfume.vn</div>
                  </div>
                </div>
              </div>
            `;
                    });

                    new Swiper(".feedback-swiper", {
                        slidesPerView: 1,
                        spaceBetween: 30,
                        navigation: {
                            nextEl: ".swiper-button-next",
                            prevEl: ".swiper-button-prev",
                        },
                        loop: true,
                        autoplay: {
                            delay: 5000,
                            disableOnInteraction: false,
                        },
                    });
                })
                .catch(err => {
                    console.error("Fetch error:", err);
                    document.getElementById("feedbackContainer").innerHTML = `
            <div class="swiper-slide"><p class="section-5__text-center">Không thể tải feedback: ${err.message}</p></div>
          `;
                });
        }

        document.addEventListener("DOMContentLoaded", loadFeedbackSection);
    </script>

</body>

</html>