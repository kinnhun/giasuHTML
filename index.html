<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EduMentor - Gia s∆∞</title>

    <!-- ‚úÖ Bootstrap 5 CSS CDN -->
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap 5 JS (cu·ªëi body) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">


    <link rel="stylesheet" href="./assets/css/style.css" />

</head>

<body>

    <!-- Header -->
    <div id="header"></div>

    <!-- Section 1: Gi·ªõi thi·ªáu EduMentor -->
    <div id="section-1" class="container py-4"></div>
    <div class="section-divider with-icon">
        <span class="divider-icon"> </span>
    </div>


    <!-- Section 2: Nh·∫≠n l·ªõp ngay -->
    <div id="section-2" class="container py-4"></div>
    <div class="section-divider with-icon">
        <span class="divider-icon"> </span>
    </div>



    <!-- Section 3: L∆∞u √Ω h·ªçc ph√≠ & li√™n h·ªá -->
    <div id="section-3" class="container py-4"></div>
    <div class="section-divider with-icon">
        <span class="divider-icon"> </span>
    </div>

    <!-- Section 4: Danh s√°ch c√°c l·ªõp -->
    <div id="section-4" class="container py-4"></div>
    <div class="section-divider with-icon">
        <span class="divider-icon"></span>
    </div>














    <section class="section-5 py-5">
        <div class="container">
            <h2 class="text-center section-5__heading mb-5">PH·∫¢N H·ªíI T·ª™ GIA S∆Ø</h2>
            <div class="row g-4" id="feedbackContainer">
                <div class="text-center w-100">ƒêang t·∫£i feedback...</div>
            </div>
        </div>
    </section>

    <script>
        function loadFeedbackSection() {
            fetch("https://opensheet.elk.sh/1h9qiy1UYF6niv1MNrj4v7frYfa7yanFcJjOEtS-8OTQ/Feedback")
                .then(res => {
                    if (!res.ok) {
                        throw new Error(`HTTP error! Status: ${res.status}`);
                    }
                    return res.json();
                })
                .then(data => {
                    const container = document.getElementById("feedbackContainer");
                    container.innerHTML = "";

                    if (data.length === 0) {
                        container.innerHTML = `<p class="text-warning text-center">Kh√¥ng c√≥ feedback n√†o trong sheet.</p>`;
                        return;
                    }

                    data.forEach(item => {
                        const imgSrc = convertDriveLinkToImage(item["Link feedback"]);
                        const name = item["T√™n gi√°o vi√™n"] || "·∫®n danh";
                        const role = item["Vai tr√≤"] || "";
                        const text = item["N·ªôi dung feedback"] || "";

                        container.innerHTML += `
                  <div class="col-md-4">
    <div class="section-5__card p-4 h-100">
        <div class="row g-0 h-100">
            <div class="col-md-4">
                <img src="${imgSrc}" class="section-5__feedback-img w-100 h-100" alt="Feedback image" style="border-radius: 8px 0 0 8px; object-fit: cover;" loading="lazy">
            </div>
            <div class="col-md-8">
                <p class="section-5__text">‚Äú${text}‚Äù</p>
                <div class="mt-3">
                    <strong class="section-5__name">${name}</strong><br>
                    <span class="text-muted">${role}</span>
                </div>
            </div>
        </div>
    </div>
</div>
                `;
                    });
                })
                .catch(err => {
                    document.getElementById("feedbackContainer").innerHTML =
                        `<p class="text-danger text-center">Kh√¥ng th·ªÉ t·∫£i feedback: ${err.message}</p>`;
                    console.error("Fetch error:", err);
                });
        }

        function convertDriveLinkToImage(link) {
            if (!link) return "https://via.placeholder.com/80?text=No+Image";

            // Handle Google Drive links in the format /file/d/ID/view
            const fileMatch = link.match(/\/file\/d\/([^/]+)\/view/);
            if (fileMatch && fileMatch[1]) {
                return `https://drive.google.com/thumbnail?id=${fileMatch[1]}`;
            }

            // Handle Google Drive links in the format open?id=ID
            const openMatch = link.match(/open\?id=([^&]+)/);
            if (openMatch && openMatch[1]) {
                return `https://drive.google.com/thumbnail?id=${openMatch[1]}`;
            }

            // Handle direct download links in the format drive.usercontent.google.com/download?id=ID
            const downloadMatch = link.match(/drive\.usercontent\.google\.com\/download\?id=([^&]+)/);
            if (downloadMatch && downloadMatch[1]) {
                return `https://drive.google.com/thumbnail?id=${downloadMatch[1]}`;
            }

            // Return placeholder if no valid ID is found
            return "https://via.placeholder.com/80?text=No+Image";
        }

        // Call when DOM is ready
        document.addEventListener("DOMContentLoaded", () => {
            loadFeedbackSection();
        });
    </script>







    <!-- Footer -->
    <div id="footer" class="container py-4"></div>
    <div class="section-divider with-icon">
        <span class="divider-icon"> </span>
    </div>


    <div class="floating-social-buttons">
        <div class="contact-popup">üí¨ Li√™n h·ªá v·ªõi ch√∫ng t√¥i</div>

        <a href="https://zalo.me" class="social-button zalo" target="_blank" aria-label="Chat Zalo">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Icon_of_Zalo.svg/512px-Icon_of_Zalo.svg.png"
                alt="Zalo" width="35" height="35" />
        </a>

        <a href="https://m.me" target="_blank" class="social-button messenger" aria-label="Chat on Messenger">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/Facebook_Messenger_logo_2020.svg/120px-Facebook_Messenger_logo_2020.svg.png"
                alt="Messenger" width="35" height="35">
        </a>
    </div>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qEYqeGpA4u0ysp2i3UzUV2PpGIG6J2XTVPSMQQC9qcsTVvOaJjF3vJ8cNPtK2F7r"
        crossorigin="anonymous"></script>

    <script src="./assets/js/script.js"></script>
</body>

</html>